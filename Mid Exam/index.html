<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mid Exam</title>
    <style>
        body{font-family:Segoe UI,Arial,sans-serif;background:#f7fbff;margin:0;color:#122}
        .wrap{max-width:900px;margin:28px auto;padding:18px}
        .card{background:#fff;padding:18px;border-radius:10px;box-shadow:0 8px 24px rgba(12,18,33,0.06)}
        h2{margin-top:0}
        .question{margin-bottom:14px}
        .practice textarea{width:100%;height:80px}
        button{background:#2563eb;color:#fff;padding:8px 12px;border-radius:8px;border:none;cursor:pointer}
        pre{background:#f3f7ff;padding:12px;border-radius:8px}
    </style>
</head>
<body>
    <div class="wrap">
        <div class="card">
            <h2>Mid Exam - Praktik JavaScript</h2>
            <p>Berikut 3 soal praktik sederhana. Tulis fungsi di setiap textarea lalu klik <strong>Kirim Jawaban</strong>.</p>

            <form id="practiceForm">
                <div class="practice">
                    <p><strong>Praktik 1 (basic)</strong>: Tulis fungsi <code>sumArray(arr)</code> yang mengembalikan jumlah angka di array. Hint: gunakan <code>for</code>-loop.</p>
                    <textarea id="code1">function sumArray(arr) {
    // contoh pendek: gunakan for-loop untuk akumulasi
}
</textarea>

                    <p><strong>Praktik 2 (basic)</strong>: Tulis fungsi <code>maxArray(arr)</code> yang mengembalikan nilai terbesar. Hint: inisialisasi variabel max lalu bandingkan setiap elemen dengan loop.</p>
                    <textarea id="code2">function maxArray(arr) {
    // contoh: inisialisasi max = arr[0] lalu bandingkan di loop
}
</textarea>

                    <p><strong>Praktik 3 (basic)</strong>: Tulis fungsi <code>repeatString(str, n)</code> yang mengembalikan string diulang n kali. Hint: gunakan loop untuk menambahkan ke hasil.</p>
                    <textarea id="code3">function repeatString(str, n) {
    // contoh: buat variable result dan tambahkan str di setiap iterasi
}
</textarea>
                </div>

                <div style="margin-top:12px">
                    <button id="submitBtn" type="button">Kirim Jawaban</button>
                    <button id="resetBtn" type="button" style="margin-left:8px;background:#ccc;color:#000">Reset</button>
                </div>
            </form>

            <div id="result" style="margin-top:12px"></div>
        </div>
    </div>

    <script>
        document.getElementById('submitBtn').addEventListener('click', function(){
            let score = 0;
            const feedback = [];

            const code1 = document.getElementById('code1').value;
            const code2 = document.getElementById('code2').value;
            const code3 = document.getElementById('code3').value;

            // Praktik 1: sumArray
            try {
                const fn1 = new Function(code1 + '\n return sumArray;')();
                if(typeof fn1 === 'function'){
                    const ok = fn1([1,2,3]) === 6 && fn1([0,0,0]) === 0;
                    if(ok){ score += 2; feedback.push('Praktik 1: Benar (+2)'); }
                    else feedback.push('Praktik 1: Hasil tidak sesuai');
                } else feedback.push('Praktik 1: Fungsi tidak ditemukan');
            } catch (e){ feedback.push('Praktik 1: Error - '+e.message); }

            // Praktik 2: maxArray
            try {
                const fn2 = new Function(code2 + '\n return maxArray;')();
                if(typeof fn2 === 'function'){
                    const ok = fn2([2,9,3]) === 9 && fn2([-1,-5]) === -1;
                    if(ok){ score += 2; feedback.push('Praktik 2: Benar (+2)'); }
                    else feedback.push('Praktik 2: Hasil tidak sesuai');
                } else feedback.push('Praktik 2: Fungsi tidak ditemukan');
            } catch (e){ feedback.push('Praktik 2: Error - '+e.message); }

            // Praktik 3: repeatString
            try {
                const fn3 = new Function(code3 + '\n return repeatString;')();
                if(typeof fn3 === 'function'){
                    const ok = fn3('a',3) === 'aaa' && fn3('ab',2) === 'abab';
                    if(ok){ score += 2; feedback.push('Praktik 3: Benar (+2)'); }
                    else feedback.push('Praktik 3: Hasil tidak sesuai');
                } else feedback.push('Praktik 3: Fungsi tidak ditemukan');
            } catch (e){ feedback.push('Praktik 3: Error - '+e.message); }

            // Tampilkan hasil
            const resultEl = document.getElementById('result');
            resultEl.innerHTML = `<h3>Hasil</h3><p>Skor: ${score} / 6</p><ul>${feedback.map(f=>'<li>'+f+'</li>').join('')}</ul>`;
            sessionStorage.setItem('midexam_practice_score', score);
        });

        document.getElementById('resetBtn').addEventListener('click', function(){
            document.getElementById('code1').value = '';
            document.getElementById('code2').value = '';
            document.getElementById('code3').value = '';
            document.getElementById('result').innerHTML = '';
            sessionStorage.removeItem('midexam_practice_score');
        });
    </script>
</body>
</html>